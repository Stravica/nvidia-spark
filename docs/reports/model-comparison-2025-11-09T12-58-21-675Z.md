# vLLM Model Performance Comparison Report

**Test Date:** 2025-11-09
**Hardware:** NVIDIA DGX Spark GB10 (128GB unified memory)
**Test Iterations:** 3
**vLLM Port:** 8000

---

## Executive Summary

This report compares three vLLM models on NVIDIA DGX Spark:
- **Qwen3-32B-FP8** (Dense 32B) - Baseline
- **Qwen3-30B-A3B-FP8** (MoE 30B, 3B active) - Efficiency-optimized
- **Llama 3.3 70B-FP8** (Dense 70B) - Quality-optimized, long-context

---

## Test Configuration

### Models Tested

#### Dense 32B (Baseline)
- **Service:** `vllm-qwen3-32b-fp8`
- **Model ID:** `Qwen/Qwen3-32B-FP8`
- **Max Context:** 32K tokens

#### MoE 30B (3B active)
- **Service:** `vllm-qwen3-30b-a3b-fp8`
- **Model ID:** `Qwen/Qwen3-30B-A3B-Instruct-2507-FP8`
- **Max Context:** 33K tokens

#### Dense 70B (Long-context)
- **Service:** `vllm-llama33-70b-fp8`
- **Model ID:** `nvidia/Llama-3.3-70B-Instruct-FP8`
- **Max Context:** 66K tokens

### Test Scenarios

1. **Single-Request Latency**
   - Fixed output: 500 tokens
   - Minimal input prompt
   - Measures: TTFT, TPS, total time

2. **Long-Context Handling**
   - Variable input sizes: 1K, 8K, 16K, 32K tokens
   - Fixed output: 100 tokens
   - Measures: TTFT, total time, context processing

---

## Results

### 1. Single-Request Latency

| Metric | Dense 32B (Baseline) | MoE 30B (3B active) | Dense 70B (Long-context) |
|--------|--------|--------|--------|
| **TTFT (ms)** | 190 ± 26 | 79 ± 52 | 393 ± 28 |
| **TPS (tok/s)** | 6.21 ± 0.01 | 41.28 ± 0.17 | 2.80 ± 0.01 |
| **Tokens In** | 34 | 34 | 61 |
| **Tokens Out** | 500 | 500 | 500 |
| **Total Time (s)** | 80.7 ± 0.2 | 12.2 ± 0.1 | 178.9 ± 0.3 |

**Winner:** MoE 30B (3B active) (41.28 tok/s)

### 2. Long-Context Performance

#### Short Context (1K tokens)

| Metric | Dense 32B (Baseline) | MoE 30B (3B active) | Dense 70B (Long-context) |
|--------|--------|--------|--------|
| **TTFT (ms)** | 284 ± 149 | 140 ± 86 | 490 ± 166 |
| **Tokens In** | 603 | 603 | 628 |
| **Total Time (s)** | 16.4 ± 0.2 | 2.6 ± 0.1 | 36.1 ± 0.2 |

**Fastest TTFT:** MoE 30B (3B active) (140 ms)

#### Medium Context (8K tokens)

| Metric | Dense 32B (Baseline) | MoE 30B (3B active) | Dense 70B (Long-context) |
|--------|--------|--------|--------|
| **TTFT (ms)** | 2006 ± 2545 | 270 ± 270 | 3407 ± 4238 |
| **Tokens In** | 4567 | 4567 | 4592 |
| **Total Time (s)** | 18.6 ± 2.5 | 2.9 ± 0.3 | 39.6 ± 4.2 |

**Fastest TTFT:** MoE 30B (3B active) (270 ms)

#### Long Context (16K tokens)

| Metric | Dense 32B (Baseline) | MoE 30B (3B active) | Dense 70B (Long-context) |
|--------|--------|--------|--------|
| **TTFT (ms)** | 2055 ± 2578 | 366 ± 364 | 4117 ± 5209 |
| **Tokens In** | 9098 | 9098 | 9123 |
| **Total Time (s)** | 19.2 ± 2.7 | 3.2 ± 0.4 | 40.7 ± 5.2 |

**Fastest TTFT:** MoE 30B (3B active) (366 ms)

#### Very Long Context (32K tokens)

| Metric | Dense 32B (Baseline) | MoE 30B (3B active) | Dense 70B (Long-context) |
|--------|--------|--------|--------|
| **TTFT (ms)** | 6239 ± 8306 | 928 ± 1117 | 10811 ± 14579 |
| **Tokens In** | 18156 | 18156 | 18181 |
| **Total Time (s)** | 24.3 ± 8.3 | 4.2 ± 1.1 | 48.7 ± 14.6 |

**Fastest TTFT:** MoE 30B (3B active) (928 ms)

---

## Analysis

### Performance Characteristics

#### Dense 32B (Baseline)

**Latency Performance:**
- TTFT: 190 ms (± 26 ms)
- Throughput: 6.21 tok/s (± 0.01 tok/s)
- Total Time: 80.7 s

**Context Processing:**
- Short Context (1K tokens): TTFT 284 ms, Total 16.4 s
- Medium Context (8K tokens): TTFT 2006 ms, Total 18.6 s
- Long Context (16K tokens): TTFT 2055 ms, Total 19.2 s
- Very Long Context (32K tokens): TTFT 6239 ms, Total 24.3 s

#### MoE 30B (3B active)

**Latency Performance:**
- TTFT: 79 ms (± 52 ms)
- Throughput: 41.28 tok/s (± 0.17 tok/s)
- Total Time: 12.2 s

**Context Processing:**
- Short Context (1K tokens): TTFT 140 ms, Total 2.6 s
- Medium Context (8K tokens): TTFT 270 ms, Total 2.9 s
- Long Context (16K tokens): TTFT 366 ms, Total 3.2 s
- Very Long Context (32K tokens): TTFT 928 ms, Total 4.2 s

#### Dense 70B (Long-context)

**Latency Performance:**
- TTFT: 393 ms (± 28 ms)
- Throughput: 2.80 tok/s (± 0.01 tok/s)
- Total Time: 178.9 s

**Context Processing:**
- Short Context (1K tokens): TTFT 490 ms, Total 36.1 s
- Medium Context (8K tokens): TTFT 3407 ms, Total 39.6 s
- Long Context (16K tokens): TTFT 4117 ms, Total 40.7 s
- Very Long Context (32K tokens): TTFT 10811 ms, Total 48.7 s

---

## Recommendations

### Use Case Recommendations

**Best Overall Throughput:** MoE 30B (3B active)
- 41.28x faster than baseline
- Best for: High-concurrency workloads, API serving, batch processing

**Best for Long-Context:** MoE 30B (3B active)
- Supports up to 65.536K tokens
- Best for: Document analysis, code review, research papers

**Best Quality:** Dense 70B (Long-context)
- Largest model (70B parameters)
- Best for: Complex reasoning, high-quality outputs, production use cases

---

## Test Environment

- **Hardware:** NVIDIA DGX Spark GB10 Grace Blackwell Superchip
  - CPU: 20-core Arm (10x Cortex-X925 + 10x Cortex-A725)
  - GPU: NVIDIA Blackwell (6,144 CUDA cores)
  - Memory: 128 GB LPDDR5x unified (273 GB/s bandwidth)
- **Software:** vLLM v0.10.1.1+381074ae.nv25.09
- **Test Tool:** perftest-models.js
- **Date:** 2025-11-09

---

*Report generated automatically by perftest-models.js*
